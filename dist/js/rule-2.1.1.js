(()=>{"use strict";var e={321:e=>{e.exports=JSON.parse('{"Mリーグルール":{"配給原点":25000,"順位点":["+30.0","+10.0","-10.0","-30.0"],"赤牌":{"m":1,"p":1,"s":1},"連風牌は2符":true,"クイタンあり":true,"喰い替え許可レベル":0,"場数":2,"途中流局あり":false,"流し満貫あり":false,"ノーテン宣言あり":true,"ノーテン罰あり":true,"最大同時和了数":1,"連荘方式":2,"トビ終了あり":false,"オーラス止めあり":false,"延長戦方式":0,"一発あり":true,"裏ドラあり":true,"カンドラあり":true,"カン裏あり":true,"カンドラ後乗せ":false,"ツモ番なしリーチあり":true,"リーチ後暗槓許可レベル":1,"ダブル役満あり":false,"役満の複合あり":true,"数え役満あり":false,"役満パオあり":true,"切り上げ満貫あり":true},"Classicルール":{"配給原点":30000,"順位点":["+12.0","+4.0","-4.0","-12.0"],"赤牌":{"m":0,"p":0,"s":0},"連風牌は2符":false,"クイタンあり":true,"喰い替え許可レベル":2,"場数":2,"途中流局あり":false,"流し満貫あり":false,"ノーテン宣言あり":false,"ノーテン罰あり":false,"最大同時和了数":1,"連荘方式":1,"トビ終了あり":false,"オーラス止めあり":false,"延長戦方式":0,"一発あり":false,"裏ドラあり":false,"カンドラあり":false,"カン裏あり":false,"カンドラ後乗せ":false,"ツモ番なしリーチあり":true,"リーチ後暗槓許可レベル":0,"ダブル役満あり":false,"役満の複合あり":false,"数え役満あり":false,"役満パオあり":false,"切り上げ満貫あり":false}}')}},a={};function n(t){var l=a[t];if(void 0!==l)return l.exports;var i=a[t]={exports:{}};return e[t](i,i.exports,n),i.exports}(()=>{
/*!
 *  電脳麻将: ルール設定 v2.1.1
 *
 *  Copyright(C) 2017 Satoshi Kobayashi
 *  Released under the MIT license
 *  https://github.com/kobalab/Majiang/blob/master/LICENSE
 */
const e=n(321);function a(e){for(let a of Object.keys(e)){let n;if("順位点"!=a)"赤牌"!=a?(n="radio"==$(`input[name="${a}"]`).attr("type")||"checkbox"==$(`input[name="${a}"]`).attr("type")?!1===e[a]?[0]:!0===e[a]?[1]:[e[a]]:e[a],$(`input[name="${a}"]`).val(n)):($('input[name="赤牌"]').eq(0).val(e[a].m),$('input[name="赤牌"]').eq(1).val(e[a].p),$('input[name="赤牌"]').eq(2).val(e[a].s));else{n=e[a].find((e=>e.match(/\./)))?0:1,$('input[name="順位点四捨五入あり"]').val([n]);for(let n=1;n<4;n++)$('input[name="順位点"]').eq(n).val(e[a][n])}}l(),i(),p(),Majiang.UI.Util.fadeIn($("form"))}function t(e,a){return e=isNaN(e)?"0":+e>0?"+"+ +e:""+ +e,a?e.replace(/\.\d*$/,""):e=e.match(/\./)?e:e+".0",e}function l(){let e=$('input[name="順位点四捨五入あり"]').prop("checked"),a=0;for(let n=1;n<4;n++){let l=+$('input[name="順位点"]').eq(n).val();a+=l,$('input[name="順位点"]').eq(n).val(t(l,e))}$('input[name="順位点"]').eq(0).val(t(-a,e))}function i(){+$('input[name="裏ドラあり"]:checked').val()&&+$('input[name="カンドラあり"]:checked').val()?$('input[name="カン裏あり"]').prop("disabled",!1):$('input[name="カン裏あり"]').prop("disabled",!0).val([0]),+$('input[name="カンドラあり"]:checked').val()?$('input[name="カンドラ後乗せ"]').prop("disabled",!1):$('input[name="カンドラ後乗せ"]').prop("disabled",!0).prop("checked",!1)}function p(){+$('input[name="役満の複合あり"]:checked').val()?$('input[name="ダブル役満あり"]').prop("disabled",!1):$('input[name="ダブル役満あり"]').prop("disabled",!0).val([0])}$((function(){for(let a of Object.keys(e))$('select[name="プリセット"]').append($("<option>").val(a).text(a));localStorage.getItem("Majiang.rule")&&($('select[name="プリセット"]').append($("<option>").val("-").text("カスタムルール")),$('select[name="プリセット"]').val("-")),a(Majiang.rule(JSON.parse(localStorage.getItem("Majiang.rule")||"{}"))),$('input[name="配給原点"]').on("change",(function(){let e=$(this).val();(isNaN(e)||e<=0)&&$(this).val(Majiang.rule()["配給原点"])})),$('input[name="順位点"]').on("change",l),$('input[name="順位点四捨五入あり"]').on("change",l),$('input[name="赤牌"]').on("change",(function(){let e=$(this).val();(isNaN(e)||e<0||4<e)&&$(this).val(0)})),$('input[name="裏ドラあり"]').on("change",i),$('input[name="カンドラあり"]').on("change",i),$('input[name="役満の複合あり"]').on("change",p),$('input[name="プリセット"]').on("click",(()=>{let n=$('select[name="プリセット"]').val();return a(Majiang.rule("-"==n?JSON.parse(localStorage.getItem("Majiang.rule")||"{}"):e[n]||{})),!1})),$("form").on("submit",(()=>(localStorage.getItem("Majiang.rule")||$('select[name="プリセット"]').append($("<option>").val("-").text("カスタムルール")),localStorage.setItem("Majiang.rule",JSON.stringify(function(){let e=Majiang.rule();for(let a of Object.keys(e))if("順位点"!=a)"赤牌"!=a?"radio"==$(`input[name="${a}"]`).attr("type")?(e[a]=+$(`input[name="${a}"]:checked`).val(),2==$(`input[name="${a}"]`).length&&(e[a]=0!=e[a])):"checkbox"==$(`input[name="${a}"]`).attr("type")?e[a]=$(`input[name="${a}"]`).prop("checked"):e[a]=+$(`input[name="${a}"]`).val():(e[a].m=+$('input[name="赤牌"]').eq(0).val(),e[a].p=+$('input[name="赤牌"]').eq(1).val(),e[a].s=+$('input[name="赤牌"]').eq(2).val());else for(let n=0;n<4;n++)e[a][n]=$('input[name="順位点"]').eq(n).val();return e}())),$('select[name="プリセット"]').val("-"),Majiang.UI.Util.fadeIn($("form")),Majiang.UI.Util.fadeIn($(".message")),setTimeout((()=>$(".message").trigger("click")),2e3),!1))),$(".message").on("click",(function(){return Majiang.UI.Util.fadeOut($(this)),!1}))}))})()})();