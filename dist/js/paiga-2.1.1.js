(()=>{"use strict";
/*!
 *  電脳麻将: 牌画入力 v2.1.1
 *
 *  Copyright(C) 2017 Satoshi Kobayashi
 *  Released under the MIT license
 *  https://github.com/kobalab/Majiang/blob/master/LICENSE
 */
const i="https://kobalab.github.io/paiga/",g={_:"ura.gif",m0:"man5red.gif",m1:"man1.gif",m2:"man2.gif",m3:"man3.gif",m4:"man4.gif",m5:"man5.gif",m6:"man6.gif",m7:"man7.gif",m8:"man8.gif",m9:"man9.gif",p0:"pin5red.gif",p1:"pin1.gif",p2:"pin2.gif",p3:"pin3.gif",p4:"pin4.gif",p5:"pin5.gif",p6:"pin6.gif",p7:"pin7.gif",p8:"pin8.gif",p9:"pin9.gif",s0:"sou5red.gif",s1:"sou1.gif",s2:"sou2.gif",s3:"sou3.gif",s4:"sou4.gif",s5:"sou5.gif",s6:"sou6.gif",s7:"sou7.gif",s8:"sou8.gif",s9:"sou9.gif",z1:"ton.gif",z2:"nan.gif",z3:"sha.gif",z4:"pei.gif",z5:"haku.gif",z6:"hatu.gif",z7:"tyun.gif",m0_:"yman5red.gif",m1_:"yman1.gif",m2_:"yman2.gif",m3_:"yman3.gif",m4_:"yman4.gif",m5_:"yman5.gif",m6_:"yman6.gif",m7_:"yman7.gif",m8_:"yman8.gif",m9_:"yman9.gif",p0_:"ypin5red.gif",p1_:"ypin1.gif",p2_:"ypin2.gif",p3_:"ypin3.gif",p4_:"ypin4.gif",p5_:"ypin5.gif",p6_:"ypin6.gif",p7_:"ypin7.gif",p8_:"ypin8.gif",p9_:"ypin9.gif",s0_:"ysou5red.gif",s1_:"ysou1.gif",s2_:"ysou2.gif",s3_:"ysou3.gif",s4_:"ysou4.gif",s5_:"ysou5.gif",s6_:"ysou6.gif",s7_:"ysou7.gif",s8_:"ysou8.gif",s9_:"ysou9.gif",z1_:"yton.gif",z2_:"ynan.gif",z3_:"ysha.gif",z4_:"ypei.gif",z5_:"yhaku.gif",z6_:"yhatu.gif",z7_:"ytyun.gif"};function f(f,a,s){return f.replace(/\\.|{(.+?)}/g,((f,n)=>"\\"==f[0]?f.substr(1):function(f,a,s){let n,t=0,p='<span style="white-space:pre;">';for(let e of f.match(/[mpsz](?:\d+[\-\=]?)+|[ _]|.+/g)||[])if(" "==e)p+=" ";else if("_"==e)n=i+g._,p+=`<img src="${n}" width="${a}" height="${s}" alt="${e}">`;else if(e.match(/^[mpsz](?:\d+[\-\=]?)+/)){let f=e[0];for(let m of e.match(/\d[\-\=]?/g)){let e=m[1]||"";m=m[0],"="!=e||t||(p+=`<span style="display:inline-block;width:${s}px">`,t=1),e||t?(n=i+g[f+m+"_"],p+="="==e?`<img src="${n}" width="${s}" height="${a}" style="vertical-align:bottom;display:block" alt="${f+m+"="}">`:`<img src="${n}" width="${s}" height="${a}" alt="${f+m+"-"}">`):(n=i+g[f+m],p+=`<img src="${n}" width="${a}" height="${s}" alt="${f+m}">`),"="!=e&&(t&&(p+="</span>"),t=0)}}else p+=`<span style="color:red;">${e}</span>`;return t&&(p+="</span>"),p+="</span>",p}(n,a,s)))}$((function(){$('textarea[name="text"]').val("このような記述ができます。\n{s067z1 z1}(ツモ) {p2-13} {z66=6-6} {_z77_} {  }(ドラ){m1}").focus(),$("form").on("submit",(()=>{let[,i,g]=$('input[name="size"]:checked').val().match(/^(\d+)x(\d+)$/),a=f($('textarea[name="text"]').val(),i,g);return $(".paiga div").empty().append($(`<p  style="white-space:pre-line">${a}</p>`)),$(".paiga textarea").val(a).select(),!1})),$("form").on("reset",(()=>{$(".paiga div").empty(),$(".paiga textarea").val(""),$('textarea[name="text"]').focus()}))}))})();